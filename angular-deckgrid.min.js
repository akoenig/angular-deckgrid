/*! angular-deckgrid (v0.1.0) - Copyright: 2013, André König (andre.koenig@posteo.de) - MIT */
angular.module("akoenig.deckgrid",[]),angular.module("akoenig.deckgrid").directive("deckgrid",["DeckgridDescriptor",function(a){"use strict";return a.create()}]),angular.module("akoenig.deckgrid").factory("DeckgridDescriptor",["Deckgrid",function(a){"use strict";function b(){this.restrict="AE",this.template='<div data-ng-repeat="column in columns" class="{{layout.classList}}"><div data-ng-repeat="item in column" data-ng-include="itemTemplate"></div></div>',this.scope={model:"=source"},this.$$deckgrid=null,this.link=this.$$link.bind(this)}return b.prototype.$$destroy=function(){this.$$deckgrid.destroy()},b.prototype.$$link=function(b,c,d){b.$on("$destroy",this.$$destroy.bind(this)),b.itemTemplate=d.itemtemplate,this.$$deckgrid=a.create(b,c[0])},{create:function(){return new b}}}]),angular.module("akoenig.deckgrid").factory("Deckgrid",["$window",function(a){"use strict";function b(b,c){var d,e=this;this.$$elem=c,this.$$watchers=[],this.$$scope=b,this.$$scope.columns=[],this.$$scope.layout=this.$$getLayout(),this.$$createColumns(),d=this.$$scope.$watch("model",this.$$onModelChange.bind(this),!0),this.$$watchers.push(d),d=angular.element(a).on("resize",e.$$onWindowResize.bind(e)),this.$$watchers.push(d)}return b.prototype.$$createColumns=function(){var a=this;this.$$scope.columns=[],angular.forEach(this.$$scope.model,function(b,c){var d=c%a.$$scope.layout.columns|0;a.$$scope.columns[d]||(a.$$scope.columns[d]=[]),a.$$scope.columns[d].push(b)})},b.prototype.$$getLayout=function(){var b,c=a.getComputedStyle(this.$$elem,":before").content;return c&&(b={},c=c.replace(/'/g,""),c=c.replace(/"/g,""),c=c.split(" "),b.columns=0|c[0],b.classList=c[1].replace(/\./g," ").trim()),b},b.prototype.$$onWindowResize=function(){var a=this,b=this.$$getLayout();b.columns!==this.$$scope.layout.columns&&(a.$$scope.layout=b,a.$$createColumns())},b.prototype.$$onModelChange=function(a,b){var c=this;a.length!==b.length&&c.$$createColumns()},b.prototype.destroy=function(){var a=this.$$watchers.length-1;for(a;a>=0;a-=1)this.$$watchers[a]()},{create:function(a,c){return new b(a,c)}}}]);